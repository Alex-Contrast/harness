{"id":"harness-06u","title":"Test parallel job execution in K8s","description":"Verify that multiple harness agent jobs can run concurrently without issues. From k8s_plan.md Phase 4.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T11:11:11.540605-05:00","updated_at":"2025-12-19T11:11:11.540605-05:00","labels":["phase4"]}
{"id":"harness-238","title":"Repo Scanner: Scan directories for git repos and extract metadata","description":"Scan user-defined root directories for git repos (.git folders). Extract: repo name (from folder), path, detected languages, file count. Output list of discovered repos for indexing config.\n\nAcceptance Criteria:\n- [ ] Finds repos with .git folders recursively\n- [ ] Skips nested repos (submodules)\n- [ ] Extracts repo name from folder name\n- [ ] Detects primary language(s) by file extensions\n- [ ] Returns structured list of RepoInfo objects\n- [ ] Unit tests for scanner logic\n- [ ] Manual test: scan ~/dev with 5+ repos","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:51.186688-05:00","updated_at":"2025-12-19T13:14:20.836105-05:00","labels":["phase2-search"]}
{"id":"harness-3oh","title":"Agent Context: Auto-inject indexed repos list into system prompt","description":"Agent context from Qdrant + working directory. On startup: query Qdrant for distinct repos (option B). Also detect current working directory and prioritize that repo in searches. Format: 'Indexed repos: [list]. Current repo: billing-api (prioritized in search).'\n\nAcceptance Criteria:\n- [ ] Query Qdrant for distinct repo values on startup\n- [ ] Detect current working directory repo (if in indexed repo)\n- [ ] System prompt includes indexed repos list\n- [ ] System prompt highlights current repo if applicable\n- [ ] Graceful handling if Qdrant unavailable\n- [ ] Unit tests with mocked Qdrant\n- [ ] Manual test: run agent in repo dir, verify context correct","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:53.00503-05:00","updated_at":"2025-12-19T13:14:35.879702-05:00","labels":["phase2-search"]}
{"id":"harness-3r8","title":"Automation: Git webhook trigger for automatic reindexing","description":"Optional: Set up webhook endpoint that triggers reindexing when code is pushed. Could use n8n or simple service.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T11:10:54.5664-05:00","updated_at":"2025-12-19T11:10:54.5664-05:00","labels":["automation","phase5"]}
{"id":"harness-7ff","title":"Integration Test: End-to-end search workflow validation","description":"Full end-to-end test of the search workflow with real repos and services.\n\nTest Workflow:\n1. harness scan ~/dev (5+ repos)\n2. harness index (all repos)\n3. harness search 'authentication' (unfiltered)\n4. harness search 'auth' --repo=api (filtered)\n5. Start agent, verify context shows indexed repos\n6. Agent task: 'find error handling code' - uses semantic search\n\nAcceptance Criteria:\n- [ ] Scan discovers all expected repos\n- [ ] Index completes without errors\n- [ ] Search returns relevant results\n- [ ] Filtered search scopes correctly\n- [ ] Agent context shows indexed repos\n- [ ] Agent successfully uses semantic_search tool\n- [ ] Performance acceptable (\u003c5s for search)\n- [ ] Document any issues found for future improvement","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T13:14:43.651577-05:00","updated_at":"2025-12-19T13:14:43.651577-05:00","labels":["phase2-search"]}
{"id":"harness-7qx","title":"Indexer Throttling: Rate limit embedding requests to be a good citizen","description":"Add configurable rate limiting for Ollama embedding calls. Batch size limits. Optional delay between repos. Prevents overloading Ollama during large index jobs.\n\nAcceptance Criteria:\n- [ ] Configurable batch size (default: 10 texts per call)\n- [ ] Configurable delay between batches (default: 0)\n- [ ] Configurable delay between repos (default: 0)\n- [ ] Config via env vars or index.yaml\n- [ ] Unit tests for batching logic\n- [ ] Manual test: index large repo, verify Ollama not overwhelmed","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:51:09.412755-05:00","updated_at":"2025-12-19T13:14:35.040413-05:00","labels":["phase2-search"]}
{"id":"harness-8r3","title":"Indexer Repo Field: Add repo name to Qdrant payload for filtering","description":"Update indexer.py to add 'repo' field to Qdrant payload. Derive repo name from path (e.g., ~/dev/billing-api → billing-api). Enables filtering searches by repo.\n\nAcceptance Criteria:\n- [ ] Payload includes 'repo' field derived from path\n- [ ] Repo name extraction handles edge cases (trailing slash, nested paths)\n- [ ] Existing tests updated for new field\n- [ ] New unit tests for repo name extraction\n- [ ] Manual test: index repo, verify payload in Qdrant has repo field","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:52.097925-05:00","updated_at":"2025-12-19T13:14:21.675856-05:00","labels":["phase2-search"]}
{"id":"harness-b8w","title":"Qdrant Python Integration: Set up qdrant-client and create QdrantClient singleton","description":"Set up qdrant-client in harness/__init__.py or dedicated module. Create singleton QdrantClient that reads host/port from environment variables (QDRANT_HOST, QDRANT_PORT). Create 'code' collection with 768-dim vectors for nomic-embed-text. See plan.md Phase 2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:07:32.70853-05:00","updated_at":"2025-12-19T11:26:10.102459-05:00","closed_at":"2025-12-19T11:26:10.102461-05:00","labels":["phase2","qdrant"]}
{"id":"harness-ci3","title":"Automation: On-demand indexing Job for ad-hoc reindexing","description":"Create K8s Job template for triggering reindexing manually. Should mount host repos and run harness.indexer module.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T11:10:20.982522-05:00","updated_at":"2025-12-19T11:10:20.982522-05:00","labels":["automation","phase5"]}
{"id":"harness-jvi","title":"Indexer Resilience: Add retry logic, resume on failure, progress tracking","description":"Split indexing into resumable chunks. Track progress per-repo. Retry failed embeddings with backoff. Save checkpoint state to resume after failures. Add progress output (X/Y repos, N files indexed).\n\nAcceptance Criteria:\n- [ ] Checkpoint file tracks indexed repos/files\n- [ ] Resume skips already-indexed content\n- [ ] Retry with exponential backoff on embedding failures\n- [ ] Progress output: 'Indexing repo X/Y: name (N files)'\n- [ ] Graceful handling of Ctrl+C (saves checkpoint)\n- [ ] Unit tests for checkpoint save/load\n- [ ] Manual test: interrupt indexing, resume, verify no duplicates","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:51:08.981893-05:00","updated_at":"2025-12-19T13:14:22.162441-05:00","labels":["phase2-search"]}
{"id":"harness-mpy","title":"Qdrant Embedding Pipeline: Implement embedding generation using Ollama nomic-embed-text","description":"Create harness/embedding.py with function to generate embeddings via ollama.embed() using nomic-embed-text model. Return 768-dimensional vectors suitable for Qdrant. See plan.md Phase 2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:07:41.482472-05:00","updated_at":"2025-12-19T11:26:45.153842-05:00","closed_at":"2025-12-19T11:26:45.153844-05:00","labels":["phase2","qdrant"]}
{"id":"harness-ote","title":"Automation: CronJob for scheduled codebase reindexing","description":"Create K8s CronJob that runs nightly to reindex code repositories into Qdrant. See k8s_plan.md Phase 5 for template.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T11:09:15.959962-05:00","updated_at":"2025-12-19T11:09:15.959962-05:00","labels":["automation","phase5"]}
{"id":"harness-u3i","title":"Filtered Search: Add repo/tags filters to SemanticSearchTool","description":"Add optional filters to SemanticSearchTool: repo (single), repos (list), tags (list), directory (root path). Use Qdrant Filter with FieldCondition for filtering.\n\nAcceptance Criteria:\n- [ ] Filter by single repo: semantic_search(query, repo='api')\n- [ ] Filter by multiple repos: semantic_search(query, repos=['api', 'web'])\n- [ ] Filter by tags: semantic_search(query, tags=['backend'])\n- [ ] Filters combine with AND logic\n- [ ] Tool documentation updated with new params\n- [ ] Unit tests for filter construction\n- [ ] Manual test: search with/without filters, verify scoping works","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:52.539477-05:00","updated_at":"2025-12-19T13:14:35.462458-05:00","labels":["phase2-search"]}
{"id":"harness-upk","title":"CLI Commands: Add harness scan, harness index, harness search commands","description":"Add CLI subcommands: 'harness scan \u003cdir\u003e' - scan and populate config, 'harness index' - index all configured repos, 'harness search \u003cquery\u003e' - test search from CLI. Use argparse or click.\n\nAcceptance Criteria:\n- [ ] harness scan \u003cdir\u003e - scans dir, updates config, shows found repos\n- [ ] harness index - indexes all repos in config, shows progress\n- [ ] harness index \u003crepo\u003e - indexes single repo\n- [ ] harness search \u003cquery\u003e - runs search, displays results\n- [ ] harness search \u003cquery\u003e --repo=X - filtered search\n- [ ] --help works for all commands\n- [ ] Manual test: full workflow scan → index → search","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:53.478104-05:00","updated_at":"2025-12-19T13:14:36.287161-05:00","labels":["phase2-search"]}
{"id":"harness-urd","title":"Index Config: Store discovered repos and index state in ~/.harness/","description":"Create ~/.harness/index.yaml to store: root directories to scan, discovered repos with metadata, user-added tags per repo, last indexed timestamp. Auto-populated by scanner, editable by user.\n\nAcceptance Criteria:\n- [ ] YAML schema defined and documented\n- [ ] Load/save functions work correctly\n- [ ] Merges scanner results with existing config (doesn't overwrite user tags)\n- [ ] Tracks last_indexed timestamp per repo\n- [ ] Creates ~/.harness/ dir if missing\n- [ ] Unit tests for config load/save/merge\n- [ ] Manual test: edit tags, re-scan, verify tags preserved","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:51.621944-05:00","updated_at":"2025-12-19T13:14:21.258408-05:00","labels":["phase2-search"]}
{"id":"harness-v8y","title":"Qdrant Code Indexer: Build indexer for Python/code files with chunking strategy","description":"Create harness/indexer.py with code file indexer. Chunking strategy: ~500 lines or by function/class. Store filepath, language, content as payload. Support Python initially, extend to other languages. See plan.md Phase 2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:08:46.154318-05:00","updated_at":"2025-12-19T11:27:26.83328-05:00","closed_at":"2025-12-19T11:27:26.833281-05:00","labels":["phase2","qdrant"]}
{"id":"harness-xzs","title":"Qdrant SemanticSearchTool: Add semantic search tool to agent tools","description":"Create SemanticSearchTool class in harness/tools/search.py. Takes natural language query, embeds it, searches Qdrant, returns top-k relevant code chunks. Integrate with MCP tool system. See plan.md Phase 2.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:09:03.047606-05:00","updated_at":"2025-12-19T11:29:42.904017-05:00","closed_at":"2025-12-19T11:29:42.904019-05:00","labels":["phase2","qdrant"]}
